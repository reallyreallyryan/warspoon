---
import { NAV_LINKS } from '../consts';

const pathname = Astro.url.pathname;
---

<details class="md:hidden relative" id="mobile-menu">
  <summary
    class="list-none cursor-pointer p-2 text-(--color-text-secondary) hover:text-(--color-accent) transition-colors"
    aria-label="Toggle menu"
  >
    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
    </svg>
  </summary>
  <nav
    class="absolute right-0 top-full mt-2 w-48 rounded-lg bg-(--color-surface-800) border border-(--color-surface-700) py-2 shadow-lg z-50"
    aria-label="Mobile navigation"
  >
    {NAV_LINKS.map(({ label, href }) => (
      <a
        href={href}
        class:list={[
          'block px-4 py-2 text-sm transition-colors hover:bg-(--color-surface-700)',
          pathname === href || (href !== '/' && pathname.startsWith(href))
            ? 'text-(--color-accent)'
            : 'text-(--color-text-secondary)',
        ]}
      >
        {label}
      </a>
    ))}
  </nav>
</details>
